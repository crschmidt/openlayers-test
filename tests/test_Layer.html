<html>
<head>
  <script src="../lib/OpenLayers.js"></script>
  <script type="text/javascript"><!--
    var layer; 

    function test_01_Layer_constructor (t) {
        t.plan( 6 );
        
        var options = { chicken: 151, foo: "bar" };
        var layer = new OpenLayers.Layer('Test Layer', options);
        
        t.ok( layer instanceof OpenLayers.Layer, "new OpenLayers.Layer returns object" );
        t.eq( layer.name, "Test Layer", "layer.name is correct" );
        t.ok( ((layer.options["chicken"] == 151) && (layer.options["foo"] == "bar")), "layer.options correctly set" );


        layer = new OpenLayers.Layer('Test Layer');
        t.ok( layer instanceof OpenLayers.Layer, "new OpenLayers.Layer returns object" );
        t.eq( layer.name, "Test Layer", "layer.name is correct" );
        t.ok( layer.options instanceof Object, "layer.options correctly not set to null" );
    }

    function test_02_Layer_clone (t) {
        t.plan( 3 );
        
        var options = { chicken: 151, foo: "bar" };
        var layer = new OpenLayers.Layer('Test Layer', options);
        var clone = layer.clone();
        
        t.ok( clone instanceof OpenLayers.Layer, "new OpenLayers.Layer returns object" );
        t.eq( clone.name, "Test Layer", "default clone.name is correct" );
        t.ok( ((clone.options["chicken"] == 151) && (clone.options["foo"] == "bar")), "clone.options correctly set" );
        
    }

/**
 * 
    function test_02_Layer_clone (t) {
        t.plan( 7 );
        
        var options = { chicken: 151, foo: "bar" };
        var layer = new OpenLayers.Layer('Test Layer', options);
        var clone = layer.clone();
        
        t.ok( clone instanceof OpenLayers.Layer, "new OpenLayers.Layer returns object" );
        t.eq( clone.name, "Test Layer", "default clone.name is correct" );
        t.ok( ((clone.options["chicken"] == 151) && (clone.options["foo"] == "bar")), "clone.options correctly set" );


        var layer = new OpenLayers.Layer('Test Layer');
        var clone = layer.clone();
        
        t.ok( clone.options == null, "clone.options correctly left at null" );



        var layer = new OpenLayers.Layer('Test Layer', options);
        var clone = layer.clone("Special Bonus");
        
        t.eq( clone.name, "Special Bonus", "clone.name is correct" );



        var newOptions = { foo: "stoo", clear: "skies" };
        var layer = new OpenLayers.Layer('Test Layer', options);
        var clone = layer.clone("Special Bonus", newOptions);
        
        t.ok( ((clone.options["chicken"] == 151) && 
               (clone.options["foo"] == "stoo") &&
               (clone.options["clear"] == "skies")), "clone.options correctly merged" );


        var newOptions = { chicken: 151, foo: "stoo", clear: "skies" };
        var layer = new OpenLayers.Layer('Test Layer');
        var clone = layer.clone("Special Bonus", newOptions);

        t.ok( ((clone.options["foo"] == "stoo") &&
               (clone.options["clear"] == "skies")), "clone.options correctly merged" );

    }
 */

    function test_99_Layer_destroy (t) {
        t.plan( 4 );    

        var map = new OpenLayers.Map('map');
        
        layer = new OpenLayers.Layer('Test Layer');

        map.addLayer(layer);

        layer.destroy();

        t.eq( layer.name, null, "layer.name is null after destroy" );
        t.eq( layer.div, null, "layer.div is null after destroy" );
        t.eq( layer.map, null, "layer.map is null after destroy" );
        t.eq( layer.options, null, "layer.options is null after destroy" );

    }
  // -->
  </script>
</head>
<body>
  <div id="map"></div>
</body>
</html>
