<html> 
<head> 
    <script src="../../lib/OpenLayers.js"></script> 
    <script type="text/javascript">

    var test_content = '<sld:StyledLayerDescriptor xmlns:sld="http://www.opengis.net/sld" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml"><sld:NamedLayer><sld:Name>TestLayer</sld:Name><sld:UserStyle><sld:Name>foo</sld:Name><sld:FeatureTypeStyle><sld:Rule><sld:Name>bar</sld:Name><ogc:Filter></ogc:Filter><sld:PolygonSymbolizer><sld:Fill><sld:CssParameter name="fill"><ogc:Literal>blue</ogc:Literal></sld:CssParameter></sld:Fill></sld:PolygonSymbolizer></sld:Rule></sld:FeatureTypeStyle></sld:UserStyle></sld:NamedLayer></sld:StyledLayerDescriptor>';

    function test_Format_SLD_constructor(t) { 
        t.plan(3); 
         
        var options = {'foo': 'bar'}; 
        var format = new OpenLayers.Format.SLD(options); 
        t.ok(format instanceof OpenLayers.Format.SLD, 
             "new OpenLayers.Format.SLD returns object" ); 
        t.eq(format.foo, "bar", "constructor sets options correctly"); 
        t.eq(typeof format.read, "function", "format has a read function"); 
    }

    function test_Format_SLD_read(t) {
        t.plan(5);
        var styles = new OpenLayers.Format.SLD().read(this.test_content,
                {withNamedLayer: true});
        
        var testLayer = styles[1].TestLayer;
        
        t.ok(testLayer.foo != undefined, "SLD correctly reads a UserStyle named \"foo\"");
        t.eq(testLayer.foo.rules.length, 1, "The number of rules for the UserStyle is correct");
        t.eq(testLayer.foo.rules[0].name, "bar", "The first rule's name is \"bar\"");
        t.eq(testLayer.foo.rules[0].symbolizer.Polygon.fillColor, "blue", "The fillColor for the Polygon symbolizer is correct");
        t.eq(testLayer.foo.name, styles[0][0].name, "The content hash of the Format contains the correct rules.");
    }

    </script> 
</head> 
<body> 
</body> 
</html> 
