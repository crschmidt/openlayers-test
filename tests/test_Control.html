<html>
<head>
  <script src="../lib/OpenLayers.js"></script>
  <script type="text/javascript">
    function test_Control_constructor(t) {
        t.plan(2);
    
        var control = new OpenLayers.Control();

        t.ok(control instanceof OpenLayers.Control, "new OpenLayers.Control returns object");
        t.eq(control.displayClass, "olControl", "displayClass set correctly");
    }

    function test_Control_addControl(t) {
        t.plan(2);
    
        var map = new OpenLayers.Map('map');
        var control = new OpenLayers.Control();
        map.addControl(control);

        t.ok(control.map === map, "Control.map is set to the map object" );
        t.ok(map.controls[map.controls.length - 1] === control, "map.controls contains control");
    }
    
    function test_Control_title(t) { 
        t.plan( 1 ); 
        var titleText = 'Title test'; 
        control = new OpenLayers.Control({title:titleText}); 
        t.eq( control.title, titleText, "control.title set correctly" ); 
    }
    
    function test_Control_destroy(t) {
        t.plan(3);
    
        var map = new OpenLayers.Map('map');
        var control = new OpenLayers.Control();
        map.addControl(control);

        control.destroy();
        t.ok(map.controls[map.controls.length - 1] != control, "map.controls doesn't contains control");

        t.ok(control.map == null, "Control.map is null");
        t.ok(control.handler == null, "Control.handler is null");
    }

  </script>
</head>
<body>
    <div id="map" style="width: 1024px; height: 512px;"/>
</body>
</html>
